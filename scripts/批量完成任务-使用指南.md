# 批量完成任务 - 使用指南

## 方法一：浏览器控制台（推荐）

### 步骤：
1. 打开 TODO App（`npm run dev` 或直接打开网页）
2. 按 `F12` 打开开发者工具
3. 切换到 `Console` 标签
4. 复制下面的代码，粘贴到控制台，按回车执行

### 代码：
```javascript
(async function() {
  const { Preferences } = window.Capacitor || { Preferences: null }
  if (!Preferences) {
    console.error('❌ Capacitor Preferences 不可用')
    return
  }
  
  const username = 'zhaosj'
  const { value } = await Preferences.get({ key: `tasks_${username}` })
  if (!value) {
    console.log('❌ 未找到任务数据')
    return
  }
  
  const tasks = JSON.parse(value)
  const incompleteTasks = tasks.filter(t => t.status === 'pending' || t.status === 'overdue')
  const completeCount = Math.floor(incompleteTasks.length * 0.8)
  const shuffled = [...incompleteTasks].sort(() => Math.random() - 0.5)
  const toCompleteIds = new Set(shuffled.slice(0, completeCount).map(t => t.id))
  
  tasks.forEach(task => {
    if (toCompleteIds.has(task.id)) {
      task.status = 'completed'
    }
  })
  
  await Preferences.set({ key: `tasks_${username}`, value: JSON.stringify(tasks) })
  
  console.log(`✅ 已完成 ${completeCount} 个任务`)
  console.log(`📊 完成率: ${((tasks.filter(t => t.status === 'completed').length / tasks.length) * 100).toFixed(1)}%`)
  
  setTimeout(() => window.location.reload(), 2000)
})()
```

### 效果：
- 随机选择80%的待办/逾期任务
- 标记为已完成
- 2秒后自动刷新页面

---

## 方法二：修改完成率

如果你想指定不同的完成率，修改这一行：
```javascript
const completeCount = Math.floor(incompleteTasks.length * 0.8)  // 0.8 = 80%
```

改为：
- `0.5` = 50%
- `0.9` = 90%
- `1.0` = 100%

---

## 注意事项
- ⚠️ 此操作不可撤销（除非从回收站恢复）
- ⚠️ 建议先导出数据备份
- ✅ 仅影响待办和逾期任务
- ✅ 已完成的任务不受影响
