# TO-DO App 完整功能说明

## 📋 目录

1. [任务类型系统](#任务类型系统)
2. [任务截止时间](#任务截止时间)
3. [番茄钟系统](#番茄钟系统)
4. [筛选功能](#筛选功能)
5. [用户系统](#用户系统)
6. [数据管理](#数据管理)

---

## 任务类型系统

### 支持的7种任务类型

#### 1. 今天 (today)
- **描述**: 今天需要完成的任务
- **截止时间**: 今天 23:59
- **适用场景**: 临时任务、当日事项

#### 2. 明天 (tomorrow)
- **描述**: 明天需要完成的任务
- **截止时间**: 明天 23:59
- **适用场景**: 明天要做的事

#### 3. 本周内 (this_week)
- **描述**: 本周内需要完成的任务
- **截止时间**: 本周日 23:59
- **适用场景**: 灵活的周任务

#### 4. 指定日期 (custom_date)
- **描述**: 指定具体日期和时间的任务
- **截止时间**: 指定的日期和时间
- **适用场景**: 重要会议、截止日期明确的任务
- **特殊功能**: 
  - 可选择具体日期（如 2026-02-25）
  - 可选择具体时间（如 14:30）
  - 使用 datetime-local 选择器

#### 5. 每天重复 (daily)
- **描述**: 每天都要完成的任务
- **截止时间**: 每天 23:59
- **适用场景**: 日常习惯、每日例行事项

#### 6. 工作日重复 (weekday)
- **描述**: 周一到周五重复的任务
- **截止时间**: 每个工作日 23:59
- **适用场景**: 工作相关的日常任务

#### 7. 每周重复 (weekly)
- **描述**: 每周特定几天重复的任务
- **截止时间**: 每天 23:59
- **适用场景**: 固定周期任务
- **特殊功能**: 可选择星期几（如每周一、三、五）

---

## 任务截止时间

### 时间显示

每个任务卡片显示两个时间：

1. **📝 添加时间**: 任务创建的时间
   - 格式：`2026/02/19 10:30`

2. **⏰ 计划完成时间**: 根据任务类型自动计算
   - 今天：`今天 23:59`
   - 明天：`明天 23:59`
   - 本周内：`本周日 23:59`
   - 指定日期：`2/25 14:30`（有时间）或 `2/25 23:59`（无时间）
   - 重复任务：`今天 23:59`

### 颜色状态

- 🔵 **正常**（蓝色）：距离截止时间 > 6小时
- 🟠 **警告**（橙色）：距离截止时间 1-6小时
- 🔴 **紧急**（红色）：距离截止时间 < 1小时，带脉动动画
- 🔴 **已逾期**（深红色）：已超过截止时间，显示逾期天数/小时
- 🟢 **已完成**（绿色）：任务已完成，带删除线

---

## 番茄钟系统

### 任务卡片显示

每个任务根据优先级显示预估番茄数：

- **高优先级**: 🍅🍅🍅🍅（4个番茄）
- **中优先级**: 🍅🍅（2个番茄）
- **低优先级**: 🍅（1个番茄）

### 个人主页统计

点击右上角头像 → 个人主页 → 番茄统计

#### 1. ✅ 已获得番茄（绿色）
- 统计所有已完成任务的番茄数
- 计算方式：
  - 高优先级完成 = +4 🍅
  - 中优先级完成 = +2 🍅
  - 低优先级完成 = +1 🍅

#### 2. ⏳ 待获得番茄（橙色）
- 统计所有待完成任务的番茄数
- 完成后可获得的番茄总数

#### 3. ❌ 逾期扣除（红色）
- 统计所有逾期任务的番茄数
- 逾期任务会扣除对应的番茄数

#### 4. 🏆 净获得番茄（蓝色）
- 计算公式：已获得 - 逾期扣除
- 显示用户的实际番茄成就

### 激励机制

- ✅ 完成任务 → 获得番茄奖励
- ❌ 任务逾期 → 扣除番茄
- 🎯 鼓励用户按时完成高优先级任务

---

## 筛选功能

### 三行筛选布局

#### 第一行：占比 & 分类
- **占比**: 显示完成率（不可点击）
- **全部**: 显示所有任务
- **工作**: 筛选工作类任务
- **学习**: 筛选学习类任务
- **生活**: 筛选生活类任务

#### 第二行：状态 & 日期
- **待办**: 筛选待完成任务
- **已完成**: 筛选已完成任务
- **已逾期**: 筛选逾期任务
- **日期范围**: 选择起止日期筛选

#### 第三行：优先级 & 搜索
- **全部优先级**: 显示所有优先级
- **⚡高**: 筛选高优先级任务
- **⚡中**: 筛选中优先级任务
- **⚡低**: 筛选低优先级任务
- **🔍 搜索**: 关键字模糊搜索

### 组合筛选

所有筛选条件可以组合使用，例如：
- 工作分类 + 高优先级 + 搜索"报告"
- 已完成 + 本周日期范围
- 待办 + 学习分类 + 中优先级

---

## 用户系统

### 注册功能

1. **必填项**:
   - 用户名
   - 密码

2. **可选项**:
   - 密保问题（用于密码找回）
   - 密保答案

3. **提示**: 不设置密保问题将无法通过安全问题找回密码

### 登录功能

1. **自动登录**: 
   - 应用启动时自动检查本地存储
   - 如果有登录会话，自动登录

2. **会话保持**:
   - 杀掉应用重新打开，自动登录
   - 只有主动点击"退出登录"才清除会话

3. **路由守卫**:
   - 已登录访问登录页 → 自动跳转到待办页
   - 未登录访问待办页 → 自动跳转到登录页

### 个人主页

点击右上角头像进入个人主页，包含：

1. **用户信息**:
   - 用户名（可编辑）
   - 注册时间
   - 最后登录时间
   - 使用天数

2. **任务统计**:
   - 总任务数
   - 已完成数
   - 待完成数
   - 完成率

3. **番茄统计**: 见上文番茄钟系统

4. **密码修改**: 输入当前密码和新密码

5. **数据管理**: 导出/导入/下载模板

---

## 数据管理

### 导出功能

- **格式**: Excel (.xlsx)
- **内容**: 所有任务数据
- **字段**: 任务名称、描述、分类、优先级、类型、状态、创建时间等

### 导入功能

- **格式**: Excel (.xlsx)
- **要求**: 使用官方模板格式
- **功能**: 批量导入任务
- **结果**: 显示成功/失败数量

### 下载模板

- **内容**: 100条示例任务
- **时间范围**: 2026-01-01 至 2026-02-25
- **用途**: 测试导入功能、学习数据格式

### 回收站

- **软删除**: 删除的任务先移入回收站
- **恢复**: 可从回收站恢复任务
- **永久删除**: 从回收站彻底删除

---

## 任务编辑

### 可编辑字段

点击任务名称进入编辑模式，可编辑：

1. 任务名称
2. 详细描述
3. 任务分类（工作/学习/生活）
4. 优先级（高/中/低）
5. 任务类型（7种类型）
6. 指定日期时间（仅指定日期类型）
7. 重复周期（仅每周重复类型）

### 动态显示

- 选择"指定日期"时，显示日期时间选择器
- 选择"每周重复"时，显示星期几选择器
- 其他类型不显示额外输入项

---

## 移动端优化

- ✅ 全屏宽度布局
- ✅ 触摸热区优化（44x44px）
- ✅ 字体大小适配小屏
- ✅ 间距优化防止文字重叠
- ✅ 响应式设计

---

**文档版本**: v1.4.0  
**更新日期**: 2026-02-19  
**适用版本**: TO-DO App v1.4.0+
